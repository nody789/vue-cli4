(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6db35023"],{"332a":function(t,s,a){"use strict";a("915b")},"915b":function(t,s,a){},b022:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"home"},[s("div",{staticClass:"container_fix"},[s("ProgressStep",{staticClass:"py-4",attrs:{current:t.step}}),s("h3",[t._v("收件人資料")]),s("div",{staticClass:"row pb-4"},[s("div",{staticClass:"col-12 col-md-5"},[s("ul",{staticClass:"order"},[t._l(t.carts.carts,(function(a){return s("li",{key:a.id,staticClass:"pb-3 orderList"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-3 p-0"},[s("div",{staticClass:"pro-img"},[s("img",{attrs:{src:a.product.imageUrl,alt:a.product.title}})])]),s("div",{staticClass:"col-7 p-0"},[s("div",{staticClass:"row m-0 w-100"},[s("div",{staticClass:"col-12 col-md-8"},[s("div",{staticClass:"pro-name"},[t._v(t._s(a.product.title))])]),s("div",{staticClass:"col-12 col-md-4"},[s("div",{staticClass:"pro_qty"},[t._v("x"+t._s(a.qty))])])])]),s("div",{staticClass:"col-2 p-0"},[a.price?s("div",{staticClass:"pro_price"},[t._v(" NT"+t._s(t._f("currency")(a.product.price))+" ")]):s("div",{staticClass:"pro_price"},[t._v(" NT"+t._s(t._f("currency")(a.product.origin_price))+" ")])])])])})),s("li",{staticClass:"pt-4"},[s("div",{staticClass:"row summary text-right"},[s("div",{staticClass:"col-6 p-0"},[t._v("共"+t._s(t.cartLength)+"項")]),s("div",{staticClass:"col-2 p-0"},[t._v("總計")]),s("div",{staticClass:"col-3 p-0"},[t._v(" NT"+t._s(t._f("currency")(t.carts.final_total))+" ")]),s("div",{staticClass:"col-1 p-0"})])])],2),s("div",{staticClass:"my-4 coupon"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_num,expression:"coupon_num"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠代碼"},domProps:{value:t.coupon_num},on:{input:function(s){s.target.composing||(t.coupon_num=s.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("span",{staticClass:"input-group-text coupon-send",on:{click:function(s){return s.preventDefault(),t.addCouponCode.apply(null,arguments)}}},[t._v("確認")])])]),t.coupon_success?t._e():s("div",[s("p",{staticClass:"text-danger"},[t._v("此優惠券無效")])])])]),s("div",{staticClass:"col-12 col-md-7"},[s("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function({handleSubmit:a}){return[s("form",{staticClass:"buyer_infos",on:{submit:function(s){return s.preventDefault(),a(t.createOrder)}}},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-sm-6"},[s("label",{attrs:{for:"buyer-name"}},[t._v(" 收件人姓名"),s("span",{staticClass:"marker"},[t._v("*")])]),s("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:e}){return[s("div",{class:e},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"姓名",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)})],1),s("div",{staticClass:"form-group col-sm-6"},[s("label",{attrs:{for:"buyer-tel"}},[t._v(" 收件人電話"),s("span",{staticClass:"marker"},[t._v("*")])]),s("ValidationProvider",{attrs:{rules:"required|phone"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:e}){return[s("div",{class:e},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"text",id:"電話",placeholder:"請輸入電話號碼"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)})],1)]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-sm-6"},[s("label",{attrs:{for:"buyer-email"}},[t._v("Email"),s("span",{staticClass:"marker"},[t._v("*")])]),s("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:e}){return[s("div",{class:e},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"buyer-email",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)})],1),s("div",{staticClass:"form-group col-sm-6"},[s("div",[s("label",{attrs:{for:"buyer-pay"}},[t._v("付款方式")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.user.payment,expression:"form.user.payment"}],staticClass:"form-control",attrs:{name:"payment",id:"buyer-pay"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.form.user,"payment",s.target.multiple?a:a[0])}}},[s("option",{attrs:{value:"CVS"}},[t._v("超商取貨付款")]),s("option",{attrs:{value:"CTP"}},[t._v("貨到付款")])])])])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"buyeraddress"}},[t._v("收件人地址"),s("span",{staticClass:"marker"},[t._v("*")])]),s("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a,classes:e}){return[s("div",{class:e},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"請輸入地址",id:"buyeraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),s("span",{staticClass:"text-danger"},[t._v(t._s(a[0]))])])]}}],null,!0)})],1),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[t._v("備註")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"10",rows:"3",placeholder:"歡迎輸入想對我們說的話"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),s("div",{staticClass:"sub_order"},[s("button",{staticClass:"btn-order",class:{disabled:!0===t.clicked},attrs:{type:"submit"}},[t._v(" 下一步 ")])])])]}}])})],1)])],1),t._m(0)])},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"modal fade",attrs:{id:"leaveWarn",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title text-light",attrs:{id:"exampleModalLabel"}},[t._v(" PURE SAVON ")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body"},[s("p",{staticClass:"text-dark"},[s("i",{staticClass:"fas fa-exclamation-circle"}),t._v("尚未完成訂購流程，請確認是否離開此頁? ")])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-stay",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),s("button",{staticClass:"btn btn-leave",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 確定 ")])])])])])}],o=(a("14d9"),a("ea8a")),i={components:{ProgressStep:o["a"]},data(){return{step:2,carts:[],cartactual:[],cartLength:0,coupon_num:"",coupon_success:!0,clicked:!1,form:{user:{name:"",email:"",tel:"",address:"",payment:"CVS"},message:""},goNext:!1}},methods:{getCart(){const t=this,s="https://vue-course-api.hexschool.io/api/nody852/cart";t.$http.get(s).then(s=>{s.data.success&&(t.carts=s.data.data,t.cartactual=s.data.data.carts,t.cartLength=0,t.cartactual.forEach(s=>{t.cartLength+=s.qty}))})},addCouponCode(){const t=this,s={code:t.coupon_num},a="https://vue-course-api.hexschool.io/api/nody852/coupon";t.$http.post(a,{data:s}).then(s=>{s.data.success?(t.coupon_success=!0,t.$bus.$emit("message:push","成功套用2023週年慶優惠券","success")):t.coupon_success=!1}),t.getCart()},createOrder(){const t=this,s="https://vue-course-api.hexschool.io/api/nody852/order",a=t.form;t.clicked=!0,t.$http.post(s,{data:a}).then(s=>{s.data.success&&(t.goNext=!0,t.$router.push("/checkout2/"+s.data.orderId),localStorage.removeItem("cart"),t.$bus.$emit("cart:get"))})},removeCart(){const t=this;t.getCart(),t.carts.carts.forEach(s=>{const a="https://vue-course-api.hexschool.io/api/nody852/cart/"+s.id;t.$http.delete(a).then(s=>{t.$bus.$emit("message:push",s.data.message,"success")})})}},beforeRouteLeave(t,s,a){const e=this;e.goNext?a():($("#leaveWarn").modal("show"),$(".btn-stay").on("click",()=>{a(!1)}),$(".btn-leave").on("click",()=>{e.removeCart(),a()}))},created(){this.getCart()}},l=i,c=(a("332a"),a("2877")),n=Object(c["a"])(l,e,r,!1,null,"c86ed2c8",null);s["default"]=n.exports},ea8a:function(t,s,a){"use strict";var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"progressStep"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-4"},[s("div",{staticClass:"step",class:{now:1===t.current}},[s("p",[t._v("01 確認購買")])])]),s("div",{staticClass:"col-4"},[s("div",{staticClass:"step",class:{now:2===t.current}},[s("p",[t._v("02 填寫資料")])])]),s("div",{staticClass:"col-4"},[s("div",{staticClass:"step",class:{now:3===t.current}},[s("p",[t._v("03 完成訂單")])])])])])},r=[],o={name:"ProgressStep",props:["current"]},i=o,l=a("2877"),c=Object(l["a"])(i,e,r,!1,null,null,null);s["a"]=c.exports}}]);
//# sourceMappingURL=chunk-6db35023.a087ed90.js.map