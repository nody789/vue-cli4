(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92bc3454"],{"752f":function(t,a,s){"use strict";s.r(a);s("14d9");var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"home"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),a("div",{staticClass:"container orders_check"},[a("ProgressStep",{staticClass:"py-4",attrs:{current:t.cureent}}),a("h3",[t._v("確認購買清單")]),a("ul",{staticClass:"order"},[t._l(t.cart,(function(s){return a("li",{key:s.id,staticClass:"pb-3 orderList"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 p-0"},[a("div",{staticClass:"pro-img"},[a("img",{attrs:{src:s.imageUrl,alt:s.title}})])]),a("div",{staticClass:"col-6 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"pro-name"},[t._v(t._s(s.title))])]),a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"numControl d-flex"},[a("button",{staticClass:"btn-minus",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.changeNum(s,-1)}}},[a("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.qty,expression:"item.qty"}],staticClass:"amount",attrs:{type:"number",max:"10",min:"1"},domProps:{value:s.qty},on:{change:function(a){return t.changeAmount(s,s.qty)},input:function(a){a.target.composing||t.$set(s,"qty",a.target.value)}}}),a("button",{staticClass:"btn-plus",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.changeNum(s,1)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])])])])]),a("div",{staticClass:"col-2 p-0"},[a("div",{staticClass:"pro_price"},[t._v("NT"+t._s(t._f("currency")(s.price)))])]),a("div",{staticClass:"col-1 p-0"},[a("div",{staticClass:"pro_del",on:{click:function(a){return a.preventDefault(),t.removeCart(s)}}},[a("i",{staticClass:"fas fa-trash-alt"})])])])])})),a("li",{staticClass:"pt-4"},[a("div",{staticClass:"row summary"},[a("div",{staticClass:"col-7 p-0"},[t._v("共"+t._s(t.cartitemqty)+"件")]),a("div",{staticClass:"col-2 p-0"}),a("div",{staticClass:"col-2 p-0"},[t._v("NT"+t._s(t._f("currency")(t.total)))]),a("div",{staticClass:"col-1 p-0"})])])],2),a("div",{staticClass:"gocheck"},[a("button",{staticClass:"btn-back",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.$router.push("about")}}},[a("i",[t._v("繼續購物")])]),!0===t.clicked?a("button",{staticClass:"btn-check",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.goNextPage.apply(null,arguments)}}},[a("i"),t._v("填寫資料 ")]):a("button",{staticClass:"btn-check btn_confirmcart",class:{doubleclick:!0===t.preventDClicked},attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.confirmCart.apply(null,arguments)}}},[a("i"),t._v("下一步 ")])])],1),t._m(0),t._m(1)],1)},i=[function(){var t=this,a=t._self._c;return a("section",{staticClass:"py-5"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-5 d-flex align-items-center justify-content-center justify-content-md-start mb-4 mb-md-0"},[a("img",{attrs:{src:"stylesheets/img/6icon.com_39151_f17IbY.png",alt:"",width:"40",height:"40"}}),a("span",{staticClass:"mx-3 text-white h4 mb-0"},[t._v("定位你我的美味郵件")])]),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-square form-square-withicon d-flex justify-content-between"},[a("label",{staticClass:"form-square-icon-left fas fa-envelope",attrs:{for:"subscription"}},[a("p",{staticClass:"text-hide"},[t._v("email")])]),a("input",{staticClass:"form-input w-100",attrs:{type:"email",id:"subscription"}}),a("button",{staticClass:"btn btn-primary btn-lg d-flex align-items-center fas fa-arrow-right"},[a("p",{staticClass:"text-hide"},[t._v("arrow")])])])])])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"modal fade",attrs:{id:"leaveWarn",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title text-light",attrs:{id:"exampleModalLabel"}},[t._v(" PURE SAVON ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("p",{staticClass:"text-dark"},[a("i",{staticClass:"fas fa-exclamation-circle"}),t._v("尚未完成訂購流程，請確認是否離開此頁? ")])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-cancel",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-leave",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 確定 ")])])])])])}],c=s("1157"),r=s.n(c),n=s("ea8a"),l={components:{ProgressStep:n["a"]},data(){return{step:1,cart:[],cartLength:0,total:0,goNext:!1,clicked:!1,cartitemqty:0,isLoading:!1,preventDClicked:!1,cureent:1}},methods:{getCart(){const t=this;t.cart=JSON.parse(localStorage.getItem("cart"))||[],t.cartLength=t.cart.length,t.total=0,t.cartitemqty=0,t.cart.forEach(a=>{t.total+=a.total,t.cartitemqty+=a.qty}),0===t.cartLength&&(t.goNext=!0,t.$router.push("about"))},changeNum(t,a){const s=parseInt(t.qty+a,10);this.changeAmount(t,s)},changeAmount(t,a){const s=this;let e=-1;s.cart.length>0&&s.cart.forEach((a,s)=>{a.id===t.id&&(e=s)}),s.cart[e].qty=a>=10?10:a<=1?1:a;const i=parseInt(s.cart[e].origin_price*s.cart[e].qty,10);s.cart[e].total=i,localStorage.setItem("cart",JSON.stringify(s.cart)),s.$bus.$emit("cart:get"),s.getCart()},removeCart(t){const a=this,s=a.cart.indexOf(t);a.cart.splice(s,1),localStorage.setItem("cart",JSON.stringify(a.cart)),a.$bus.$emit("cart:get"),a.$bus.$emit("message:push","已刪除購物車商品","success"),a.getCart()},confirmCart(){const t=this;t.preventDClicked=!0,t.isLoading=!0;const a="https://vue-course-api.hexschool.io/api/nody852/cart";t.cart=JSON.parse(localStorage.getItem("cart"))||[],t.cart.forEach(s=>{const e={product_id:s.id,qty:s.qty,price:s.total};t.$http.post(a,{data:e}).then(a=>{a.data.success||t.$bus.$emit("message:push",a.data.message,"danger")})}),setTimeout(()=>{t.isLoading=!1,t.clicked=!0},1e3)},goNextPage(){this.goNext=!0,this.$router.push("/Checkout1"),console.log("push")}},beforeRouteLeave(t,a,s){const e=this;e.goNext?s():(r()("#leaveWarn").modal("show"),r()(".btn-cancel").on("click",()=>{s(!1)}),r()(".btn-leave").on("click",()=>{s()}))},created(){const t=this;t.getCart()}},o=l,u=s("2877"),d=Object(u["a"])(o,e,i,!1,null,null,null);a["default"]=d.exports},ea8a:function(t,a,s){"use strict";var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"progressStep"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:1===t.current}},[a("p",[t._v("01 確認購買")])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:2===t.current}},[a("p",[t._v("02 填寫資料")])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:3===t.current}},[a("p",[t._v("03 完成訂單")])])])])])},i=[],c={name:"ProgressStep",props:["current"]},r=c,n=s("2877"),l=Object(n["a"])(r,e,i,!1,null,null,null);a["a"]=l.exports}}]);
//# sourceMappingURL=chunk-92bc3454.49bfa776.js.map