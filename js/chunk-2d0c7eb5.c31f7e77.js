(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7eb5"],{5356:function(t,a,s){"use strict";s.r(a);s("14d9");var i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"home"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),a("div",{staticClass:"container"},[a("nav",{staticClass:"breadmark",attrs:{"aria-label":"breadcrumb"}},[a("ul",{staticClass:"breadcrumb mb-0"},[a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.$router.push("/")}}},[t._v("首頁")])]),a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.$router.push("About")}}},[t._v("商店")])]),a("li",{staticClass:"breadcrumb-item"},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.$router.push({name:"About",params:{category:t.product.category}})}}},[t._v("系列")])]),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(" "+t._s(t.product.title)+" ")])])])]),a("div",{staticClass:"container"},[a("div",{staticClass:"row product_info"},[a("div",{staticClass:"col-lg-6 col-md-7"},[a("div",{staticClass:"product_pic"},[a("img",{attrs:{src:t.product.imageUrl,alt:t.product.title}})])]),a("div",{staticClass:"col-lg-6 col-md-5"},[a("ul",{staticClass:"product_meta"},[a("li",[a("h3",[t._v(t._s(t.product.title))])]),a("li",[t.product.price?t._e():a("p",{staticClass:"origin_pricesolo"},[t._v(" NT"+t._s(t._f("currency")(t.product.origin_price))+" ")]),t.product.price?a("del",{staticClass:"origin_price"},[t._v("NT"+t._s(t._f("currency")(t.product.origin_price)))]):t._e()]),a("li",[t.product.price?a("p",{staticClass:"salesprice"},[t._v(" NT"+t._s(t._f("currency")(t.product.price))+" ")]):t._e()]),a("li",[a("div",{staticClass:"numControl d-flex justify-content-start align-items-center"},[a("button",{staticClass:"btn-minus btn",attrs:{type:"button","data-quantity":"minus","data-field":"quantity"},on:{click:function(a){return a.preventDefault(),t.changeNum(-1)}}},[a("i",{staticClass:"fa fa-minus",attrs:{"aria-hidden":"true"}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.productnum,expression:"productnum"}],staticClass:"amount",attrs:{type:"number",max:"10",min:"1"},domProps:{value:t.productnum},on:{change:function(a){return t.changeAmount(t.productnum)},input:function(a){a.target.composing||(t.productnum=a.target.value)}}}),a("button",{staticClass:"btn-plus btn",attrs:{type:"button","data-quantity":"plus","data-field":"quantity"},on:{click:function(a){return a.preventDefault(),t.changeNum(1)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])]),a("button",{staticClass:"btn-cart mt-2",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addToCart(t.product,t.productnum)}}},[a("i",{staticClass:"fas fa-shopping-cart"}),t._v("加入購物車 ")])]),a("li",[a("p",{staticClass:"product_des"},[t._v(t._s(t.product.description))])]),a("li",[a("p",{staticClass:"product_con"},[t._v(t._s(t.product.content))])])])])])]),a("div",{staticClass:"container mt-4"},[a("h3",[t._v("相關產品")]),a("div",{staticClass:"row"},t._l(t.filterSimilars,(function(s){return a("div",{key:s.id,staticClass:"col-md-4 col-sm-6 col-12 d-flex justify-content-start align-item-center"},[a("div",{staticClass:"item-card",on:{click:function(a){return a.preventDefault(),t.goRelated(s.id)}}},[a("div",{staticClass:"product_pic"},[a("img",{attrs:{src:s.imageUrl,alt:s.title}}),a("div",{staticClass:"item-tag"},[t._v("特價中")])]),a("div",{staticClass:"bottom"},[a("h3",[t._v(t._s(s.title))]),a("div",{staticClass:"price"},[t._v("NT$"+t._s(s.origin_price))])])])])})),0)])],1)},r=[],c={data(){return{product:[],similarproducts:[],productId:"",cart:[],isLoading:!1,productnum:1}},methods:{getProduct(){const t=this;t.productId=t.$route.params.product_id,t.isLoading=!0;const a="https://vue-course-api.hexschool.io/api/nody852/product/"+t.productId;t.$http.get(a).then(a=>{t.product=a.data.product,t.productnum=1,console.log(t.productId),t.isLoading=!1})},getSimilarproducts(){const t=this,a=`https://vue-course-api.hexschool.io/api/${Object({VUE_APP_APIPATH:"https://vue-course-api.hexschool.io",VUE_APP_CUSTOMPATH:"nody852",NODE_ENV:"production",BASE_URL:"/vue-cli4/"}).VUE_APPCUSTOMPATH}/products/all`;t.$http.get(a).then(a=>{t.similarproducts=a.data.products})},addToCart(t,a=1){const s=this;let i=-1;if(s.getCart(),s.cart.length>0&&s.cart.forEach((a,s)=>{a.id===t.id&&(i=s)}),-1===i){const i=parseInt(t.origin_price*a,10);s.$set(t,"total",i),s.$set(t,"qty",a),s.cart.push(t)}else{const t={...s.cart[i]};t.qty+=a;const r=parseInt(t.origin_price*t.qty,10);t.total=r,s.cart.splice(i,1),s.cart.push(t)}localStorage.setItem("cart",JSON.stringify(s.cart)),s.$bus.$emit("message:push","商品已加入購物車","success"),s.$bus.$emit("cart:get"),s.getCart()},getCart(){const t=this;t.cart=JSON.parse(localStorage.getItem("cart"))||[]},changeNum(t){const a=this.productnum+t;this.changeAmount(a)},changeAmount(t){const a=t;this.productnum=a>=10?10:a<=1?1:a},goRelated(t){this.$router.push("/ProductDetail/"+t),this.getProduct()}},computed:{filterSimilars(){const t=this;return t.similarproducts.filter(a=>a.id!==t.productId&&a.category===t.product.category)}},created(){this.getProduct(),this.getSimilarproducts(),this.getCart()}},e=c,o=s("2877"),u=Object(o["a"])(e,i,r,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0c7eb5.c31f7e77.js.map